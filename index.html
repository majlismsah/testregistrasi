<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Form Kontak Darurat & Upload Dokumen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    label { display: block; margin-top: 1rem; }
    input, button { padding: 0.5rem; width: 100%; max-width: 400px; }
    button { margin-top: 1.5rem; cursor: pointer; }
  </style>
  <script>
    async function handleSubmit(event) {
      event.preventDefault();

      const form = event.target;
      const kontakNama = form.kontak_nama.value.trim();
      const kontakHubungan = form.kontak_hubungan.value.trim();
      const kontakWa = form.kontak_wa.value.trim();

      if (!/^62\d{9,}$/.test(kontakWa)) {
        alert("Nomor WA harus dimulai dengan 62 dan minimal 11 digit.");
        return;
      }

      const fotoFile = form.foto.files[0];
      const ktpFile = form.ktp.files[0];

      if (!fotoFile || !ktpFile) {
        alert("Mohon upload kedua file: Foto & KTP.");
        return;
      }

      const toBase64 = file => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result.split(',')[1]);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });

      const fotoBase64 = await toBase64(fotoFile);
      const ktpBase64 = await toBase64(ktpFile);

      const data = {
        kontak_nama: kontakNama,
        kontak_hubungan: kontakHubungan,
        kontak_wa: kontakWa,
        foto_filename: fotoFile.name,
        foto_mimetype: fotoFile.type,
        foto_base64: fotoBase64,
        ktp_filename: ktpFile.name,
        ktp_mimetype: ktpFile.type,
        ktp_base64: ktpBase64
      };

      try {
        const response = await fetch("http
